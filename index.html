<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Technology Expert麓s - Orden de Servicio</title>

  <style>
    :root { --b:#111; --g:#666; --r:#c00; --bd:#ddd; }
    body { font-family: Arial, sans-serif; padding: 16px; max-width: 900px; margin: 0 auto; }
    h2 { margin: 6px 0 14px; }
    h3 { margin-top: 18px; margin-bottom: 8px; }
    label { font-weight: 700; display:block; margin: 10px 0 6px; }
    input, textarea, button, select {
      width: 100%; margin: 6px 0; padding: 10px; font-size: 16px; box-sizing: border-box;
      border: 1px solid var(--bd); border-radius: 8px;
    }
    textarea { min-height: 80px; resize: vertical; }
    .row { display: grid; grid-template-columns: 1fr 1fr; gap: 10px; }
    @media (max-width: 720px){ .row { grid-template-columns: 1fr; } }
    .btn { background: var(--b); color: #fff; border: none; }
    .btn.sec { background: var(--g); }
    .btn.danger { background: var(--r); }
    .btn.small { padding: 8px 10px; font-size: 14px; }
    .card {
      border: 1px solid var(--bd); padding: 12px; border-radius: 12px; margin-top: 10px;
      background: #fff;
    }
    .muted { color:#666; font-size: 14px; }
    .actions { display: grid; grid-template-columns: 1fr 1fr; gap: 10px; margin-top: 10px; }
    @media (max-width: 720px){ .actions { grid-template-columns: 1fr; } }

    /* Firma */
    .sigWrap { border:1px solid var(--bd); border-radius: 12px; padding: 10px; }
    canvas { width: 100%; height: 160px; border: 1px dashed #bbb; border-radius: 10px; touch-action: none; }
    .sigBtns { display:flex; gap:10px; margin-top: 10px; }
    .sigBtns button { width: 50%; }

    /* Barra superior */
    .topbar { display:grid; grid-template-columns: 1fr; gap: 10px; margin-bottom: 14px; }
    .pill { padding: 10px; border: 1px solid var(--bd); border-radius: 12px; background: #fafafa; }
    .pill strong { display:block; margin-bottom: 6px; }
    .miniRow { display:grid; grid-template-columns: 1fr 1fr 1fr; gap: 10px; }
    @media (max-width: 900px){ .miniRow { grid-template-columns: 1fr; } }

    /* Impresi贸n */
    @media print {
      body { padding: 0; max-width: none; }
      .noPrint { display: none !important; }
      .card { border: 1px solid #000; }
    }
  </style>
</head>

<body>

<div class="topbar noPrint">
  <div class="pill">
    <strong>Acciones r谩pidas</strong>
    <div class="miniRow">
      <button class="btn sec" onclick="exportarJSON()"> Exportar backup (.json)</button>
      <label style="margin:0;">
        <input id="importFile" type="file" accept="application/json" style="display:none" onchange="importarJSON(event)">
        <button class="btn sec" type="button" onclick="document.getElementById('importFile').click()"> Importar backup (.json)</button>
      </label>
      <button class="btn danger" onclick="borrarTodo()">Ж Borrar TODAS las 贸rdenes</button>
    </div>
    <div class="muted" style="margin-top:8px;">
      Consejo: usa Exportar cada d铆a para tener copia.
    </div>
  </div>

  <div class="pill">
    <strong>Buscar 贸rdenes</strong>
    <input id="buscador" placeholder="Buscar por #orden, nombre, c茅dula, tel, email, marca, modelo, falla..." oninput="render()">
  </div>
</div>

<h2>Orden de Servicio</h2>

<div class="noPrint">
  <h3>Datos del cliente</h3>
  <div class="row">
    <input id="cliente" placeholder="Nombre del cliente">
    <input id="cedula" placeholder="C茅dula">
  </div>
  <div class="row">
    <input id="telefono" placeholder="Celular">
    <input id="correo" placeholder="Correo electr贸nico">
  </div>

  <h3>Equipo</h3>
  <div class="row">
    <input id="marca" placeholder="Marca del celular">
    <input id="modelo" placeholder="Modelo del celular">
  </div>
  <textarea id="falla" placeholder="Falla reportada"></textarea>

  <h3>Firma del cliente</h3>
  <div class="sigWrap">
    <div class="muted">Firma con el dedo. (No se guarda si est谩 en blanco.)</div>
    <canvas id="sig"></canvas>
    <div class="sigBtns">
      <button class="btn sec" onclick="limpiarFirma()" type="button">Ы Borrar firma</button>
      <button class="btn" onclick="guardar()" type="button"> Guardar orden</button>
    </div>
  </div>

  <div class="actions">
    <button class="btn sec" onclick="nuevaOrden()" type="button"> Nueva orden (limpiar campos)</button>
    <button class="btn sec" onclick="window.scrollTo({top:document.body.scrollHeight, behavior:'smooth'})" type
